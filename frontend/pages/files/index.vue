<template>
  <section class="section">
    <div class="container">
      <!-- C·∫≠p nh·∫≠t ƒëo·∫°n n√†y: cho ti√™u ƒë·ªÅ v√† link n·∫±m c√πng h√†ng -->
      <div class="is-flex is-justify-content-space-between is-align-items-center mb-4">
        <h1 class="title">Danh s√°ch file ƒë√£ upload</h1>
        <NuxtLink to="/files/report" class="button is-link is-light">
          üîç Xem b√°o c√°o
        </NuxtLink>
      </div>

      <table class="table is-striped is-fullwidth" v-if="files.length">
        <thead>
          <tr>
            <th>ID</th>
            <th>T√™n file</th>
            <th>Th·ªùi gian upload</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="file in files" :key="file.id">
            <td>{{ file.id }}</td>
            <td>
              <NuxtLink :to="`/files/${file.id}`">{{ file.filename }}</NuxtLink>
            </td>
            <td>{{ formatDate(file.uploaded_at) }}</td>
          </tr>
        </tbody>
      </table>
      <p v-else>Kh√¥ng c√≥ file n√†o ƒë∆∞·ª£c upload.</p>
    </div>
  </section>
</template>

<script setup>
const { data: files } = await useFetch('http://127.0.0.1:8000/api/files/')

function formatDate(dateString) {
  const date = new Date(dateString)
  return date.toLocaleString('vi-VN')
}
</script>
